(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{w:()=>J});const t=["header","container"],o="nav__item",n=["btn","btn_sound-on"],a=["btn","btn_theme"];function l(e,t){const o=document.createElement(e);return o.classList.add(t),o}const s=["main","container"];function c(e,t){const o=document.createElement(e);return o.classList.add(t),o}const r=["footer","container"],i=["–£—Ä–æ–≤–µ–Ω—å","–ö-–≤–æ –±–æ–º–±","–ö-–≤–æ —Ö–æ–¥–æ–≤","–í—Ä–µ–º—è(—Å–µ–∫.)"];function d(e,t){const o=document.createElement(e);return o.classList.add(t),o}let m,g,u,S,p,_,y,L=10,f=10,I=10,b=L*f,v=0,x=L*f,h="–õ–µ–≥–∫–∏–π",C="–¢–µ–º–Ω–∞—è —Ç–µ–º–∞",q=0,T=0,E=0,M=0,H=0,k="end",w=[],N=[],O=[];function W(){if(localStorage.getItem("arrayResultWin")){let e=localStorage.getItem("arrayResultWin");J=JSON.parse(e)}if(localStorage.getItem("game")&&(k=localStorage.getItem("game")),"go"===k){if(localStorage.getItem("gameClass")&&(y=localStorage.getItem("gameClass")),localStorage.getItem("gameStyle")&&(p=localStorage.getItem("gameStyle")),localStorage.getItem("gameFieldStyle")&&(_=localStorage.getItem("gameFieldStyle")),localStorage.getItem("timeInner")&&(u=localStorage.getItem("timeInner")),localStorage.getItem("gameClass")&&(y=localStorage.getItem("gameClass")),localStorage.getItem("bomb")&&(I=localStorage.getItem("bomb")),localStorage.getItem("column")&&(L=localStorage.getItem("column")),localStorage.getItem("row")&&(f=localStorage.getItem("row")),localStorage.getItem("cells")&&(b=localStorage.getItem("cells")),localStorage.getItem("step")&&(v=localStorage.getItem("step")),localStorage.getItem("bombsIndex")){let e=localStorage.getItem("bombsIndex");m=JSON.parse(e)}if(localStorage.getItem("arrayClasses")){let e=localStorage.getItem("arrayClasses");w=JSON.parse(e)}if(localStorage.getItem("arrayInnerHTML")){let e=localStorage.getItem("arrayInnerHTML");N=JSON.parse(e)}if(localStorage.getItem("style")){let e=localStorage.getItem("style");O=JSON.parse(e)}localStorage.getItem("closeCell")&&(x=localStorage.getItem("closeCell")),localStorage.getItem("theme")&&(C=localStorage.getItem("theme")),localStorage.getItem("level")&&(h=localStorage.getItem("level")),localStorage.getItem("sec")&&(E=localStorage.getItem("sec")),localStorage.getItem("min")&&(M=localStorage.getItem("min")),localStorage.getItem("hrs")&&(H=localStorage.getItem("hrs")),localStorage.getItem("status")&&(S=localStorage.getItem("status")),localStorage.getItem("countFlag")&&(q=localStorage.getItem("countFlag")),localStorage.getItem("countBomb")&&(T=localStorage.getItem("countBomb"))}}window.addEventListener("beforeunload",(function(){if("go"===k){let e=document.querySelector(".time");const t=document.querySelector(".game"),o=document.querySelector(".game__field");localStorage.setItem("gameClass",t.className),localStorage.setItem("gameStyle",t.style.maxWidth),localStorage.setItem("gameFieldStyle",o.style.maxWidth),localStorage.setItem("timeInner",e.textContent),localStorage.setItem("bomb",I),localStorage.setItem("column",L),localStorage.setItem("row",f),localStorage.setItem("cells",b),localStorage.setItem("step",v),m&&localStorage.setItem("bombsIndex",JSON.stringify(m)),localStorage.setItem("closeCell",x),localStorage.setItem("status",ne.innerHTML),localStorage.setItem("level",h),localStorage.setItem("theme",C),localStorage.setItem("sec",E),localStorage.setItem("min",M),localStorage.setItem("hrs",H),localStorage.setItem("countFlag",X.innerHTML),localStorage.setItem("countBomb",Z.innerHTML);const n=document.querySelectorAll(".cell");w=[],N=[],O=[];for(let e=0;e<n.length;e++)w.push(n[e].className),N.push(n[e].innerHTML),O.push(n[e].style.color);localStorage.setItem("arrayClasses",JSON.stringify(w)),localStorage.setItem("arrayInnerHTML",JSON.stringify(N)),localStorage.setItem("style",JSON.stringify(O))}else localStorage.clear(),localStorage.setItem("arrayResultWin",JSON.stringify(J))})),window.addEventListener("load",W);let J=[["–°–ª–æ–∂–Ω—ã–π",20,15,40],["–õ–µ–≥–∫–∏–π",10,5,15],["–°—Ä–µ–¥–Ω–∏–π",25,34,24],["–õ–µ–≥–∫–∏–π",14,12,33],["–°–ª–æ–∂–Ω—ã–π",30,23,15],["–õ–µ–≥–∫–∏–π",10,9,3],["–õ–µ–≥–∫–∏–π",10,10,10],["–õ–µ–≥–∫–∏–π",10,13,5],["–õ–µ–≥–∫–∏–π",10,20,15],["–õ–µ–≥–∫–∏–π",11,14,8]];const A=()=>{E++,E>=60&&(E=0,M++,M>=60&&(M=0,H++)),document.querySelector(".time").textContent=(H>9?H:"0"+H)+":"+(M>9?M:"0"+M)+":"+(E>9?E:"0"+E),$()},$=()=>{g=setTimeout(A,1e3)},F=()=>{document.querySelector(".time").textContent="00:00:00",E=0,M=0,H=0},R=new Audio("https://www.fesliyanstudios.com/play-mp3/387"),B=new Audio("./src/assets/sounds/win.mp3"),j=new Audio("./src/assets/sounds/loss.mp3");(()=>{W();const e=function(){const e=l("header",t[0]);e.classList.add(t[1]);const s=l("div","header__title");s.textContent="–°–∞–ø—ë—Ä",e.append(s);const c=l("nav","header__nav"),r=l("ul","nav"),i=l("li",o);i.classList.add("nav__item_active"),i.textContent="–õ–µ–≥–∫–∏–π",r.append(i);const d=l("li",o);d.textContent="–°—Ä–µ–¥–Ω–∏–π",r.append(d);const m=l("li",o);m.textContent="–°–ª–æ–∂–Ω—ã–π",r.append(m),c.append(r),e.append(c);const g=l("div","header__button");e.append(g);const u=l("button","new-game");u.textContent="–ù–æ–≤–∞—è –∏–≥—Ä–∞",g.append(u);const S=l("button","continue");S.textContent="–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",g.append(S);const p=l("div","settings");g.append(p);const _=l("button",n[0]);_.classList.add(n[1]),p.append(_);const y=l("button",a[0]);return y.classList.add(a[1]),y.textContent="–¢–µ–º–Ω–∞—è —Ç–µ–º–∞",p.append(y),e}();document.body.append(e);const m=function(){const e=c("main",s[0]);e.classList.add(s[1]);const t=c("div","game");e.append(t);const o=c("div","game__scoreboard");t.append(o);const n=c("div","bomb");o.append(n);const a=c("input","bomb__input");a.type="number",a.min=10,a.max=99,a.step=1,a.value=10,n.append(a);const l=c("div","bomb__img");l.textContent="üí£",n.append(l);const r=c("div","info");o.append(r);const i=c("button","info__flag");i.textContent="0",r.append(i);const d=c("div","info__bomb");r.append(d);const m=c("div","info__bomb-number");m.textContent="10",d.append(m);const g=c("div","info__bomb-img");g.textContent="üí£",d.append(g);const u=c("div","time");u.textContent="00:00:00",o.append(u);const S=c("div","game__field");t.append(S);const p=c("div","game__footer");t.append(p);const _=c("div","game__status");_.textContent="–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å, –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±—É—é —è—á–µ–π–∫—É –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è",p.append(_);const y=c("div","game__message");return p.append(y),e}();document.body.append(m);const g=function(){const e=d("footer",r[0]);e.classList.add(r[1]);const t=d("table","table");e.append(t);const o=document.createElement("thead");t.append(o);const n=document.createElement("tr");o.append(n);for(let e=0;e<i.length;e++){const t=document.createElement("th");t.textContent=`${i[e]}`,n.append(t)}const a=d("tbody","tbody");t.append(a);for(let e=0;e<J.length;e++){const t=document.createElement("tr");for(let o=0;o<J[e].length;o++){const n=document.createElement("td");n.textContent=`${J[e][o]}`,t.append(n)}a.append(t)}return e}();document.body.append(g)})();const D=document.querySelector(".game__field"),P=()=>{(()=>{b=L*f;for(let e=0;e<b;e++){const e=document.createElement("div");e.classList.add("cell"),"–°–ª–æ–∂–Ω—ã–π"===h&&e.classList.add("cell_difficult"),"–°—Ä–µ–¥–Ω–∏–π"===h&&e.classList.add("cell_mid"),"–°–µ—Ç–ª–∞—è —Ç–µ–º–∞"===C&&e.classList.add("cell_dark"),D.append(e)}})()};P();const z=(e,t)=>e>=0&&t>=0&&e<L&&t<f,G=(e,t)=>!!z(e,t)&&m.includes(t*L+e),K=document.querySelector(".game__message"),Q=e=>{document.querySelector(".game__field").removeEventListener("click",oe),K.innerHTML=e},U=(e,t,o,n)=>{0!==n&&(1===n&&(o.style.color="#1770b7"),2===n&&(o.style.color="#398b3b"),3===n&&(o.style.color="#d51c1c"),4===n&&(o.style.color="#d7c632"),5===n&&(o.style.color="#673ab7"),6===n&&(o.style.color="#795548"),7===n&&(o.style.color="#CDDC39"),8===n&&(o.style.color="#E91E63"),o.textContent=n)},V=(e,t)=>{if(z(e,t)){const o=[...document.querySelectorAll(".cell")][t*L+e];if(o.classList.contains("disabled"))return;"–°–µ—Ç–ª–∞—è —Ç–µ–º–∞"===C&&o.classList.add("disabled_dark"),o.classList.add("disabled");const n=G(e,t);x-=1,ne.innerHTML=`–û—Ç–∫—Ä—ã—Ç–æ —è—á–µ–µ–∫: ${L*f-x}/${L*f}`;let a=((e,t)=>{let o=0;for(let n=-1;n<=1;n++)for(let a=-1;a<=1;a++)G(e+n,t+a)&&o++;return o})(e,t);if(x<=I){U(0,0,o,a);let e=E+60*M+60*H,t=`–£—Ä–∞! –í—ã –Ω–∞—à–ª–∏ –≤—Å–µ –º–∏–Ω—ã –∑–∞ ${e} —Å–µ–∫—É–Ω–¥ –∏ ${v} —Ö–æ–¥–æ–≤!`;return(e=>{let t=[h,I,v,e];J.pop(),J.unshift(t),localStorage.setItem("arrayResultWin",JSON.stringify(J)),(()=>{let e=document.querySelector(".tbody");e.innerHTML="";for(let t=0;t<J.length;t++){const o=document.createElement("tr");for(let e=0;e<J[t].length;e++){const n=document.createElement("td");n.textContent=`${J[t][e]}`,o.append(n)}e.append(o)}})()})(e),te.classList.contains("btn_sound-on")&&B.play(),Q(t),k="end",localStorage.setItem("game",k),F(),void clearTimeout(g)}if(n)return o.textContent="üí£",te.classList.contains("btn_sound-on")&&j.play(),(()=>{const e=[...document.querySelectorAll(".cell")];for(let t=0;t<m.length;t++)"–°–µ—Ç–ª–∞—è —Ç–µ–º–∞"===C&&e[m[t]].classList.add("disabled_dark"),e[m[t]].classList.add("disabled"),e[m[t]].textContent="üí£"})(),F(),clearTimeout(g),Q("–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑"),k="end",void localStorage.setItem("game",k);if(0!==a)return void U(0,0,o,a);for(let o=-1;o<=1;o++)for(let n=-1;n<=1;n++)V(e+o,t+n)}},X=document.querySelector(".info__flag");let Y=document.querySelector(".bomb__input"),Z=document.querySelector(".info__bomb-number");const ee=e=>{0===v&&(I=+Y.value),Z.textContent=""+(I-+X.textContent),q=X.innerHTML,T=Z.innerHTML,!e.classList.contains("background-flag")&&+q<I?(e.classList.add("background-flag"),X.textContent=""+(+q+1),Z.textContent=""+(+T-1)):e.classList.contains("background-flag")&&+q<=I&&(e.classList.remove("background-flag"),X.textContent=""+(+q-1),Z.textContent=""+(+T+1))},te=document.querySelector(".btn"),oe=e=>{const t=[...document.querySelectorAll(".cell")],o=e.target;if(o.classList.contains("cell")&&o.classList.contains("disabled")&&o.classList.contains("cell"))return te.classList.contains("btn_sound-on")&&R.play(),void ee(o);if(o.classList.contains("cell")&&!o.classList.contains("disabled")){if(te.classList.contains("btn_sound-on")&&R.play(),X.classList.contains("info__flag_inset"))return void ee(o);const e=t.indexOf(o),n=e%L,a=(e-n)/L;if(0===v){if(k="go",localStorage.setItem("game",k),I=Y.value,I>=10&&I<=99||alert(`–í—ã –≤–≤–µ–ª–∏ ${I} –±–æ–º–±. –í –¥–∞–Ω–Ω–æ–π –∏–≥—Ä–µ –º–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –æ—Ç 10 –¥–æ 99 –±–æ–º–±. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ –±–æ–º–±.`),!(I>=10&&I<=99))return;Z.textContent=""+(I-+X.innerHTML),m=(e=>{let t=[...Array(L*f).keys()];return t.splice(e,1),t.sort((()=>Math.random()-.5)).slice(0,I)})(e),$()}v++,V(n,a)}};X.addEventListener("click",(()=>{X.classList.contains("info__flag_inset")?X.classList.remove("info__flag_inset"):X.classList.add("info__flag_inset")})),D.addEventListener("click",oe);const ne=document.querySelector(".game__status"),ae=()=>{localStorage.clear(),localStorage.setItem("arrayResultWin",JSON.stringify(J)),k="end",localStorage.setItem("game",k),F(),clearTimeout(g),D.innerHTML="",X.innerHTML="0",Y.value=I,Z.innerHTML=I,v=0,m=[],ne.innerHTML="–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å, –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±—É—é —è—á–µ–π–∫—É –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è",K.innerHTML="",x=L*f,P(),D.addEventListener("click",oe)};document.querySelector(".nav").addEventListener("click",(e=>{e.target.classList.contains("nav__item")&&(document.querySelectorAll(".nav__item").forEach((e=>{e.classList.remove("nav__item_active")})),e.target.classList.add("nav__item_active"),h=e.target.innerHTML,(()=>{const e=document.querySelector(".game"),t=document.querySelector(".game__field");localStorage.clear(),localStorage.setItem("arrayResultWin",JSON.stringify(J)),"–°—Ä–µ–¥–Ω–∏–π"===h?(L=15,f=15,ae(),e.style.maxWidth="620px",t.style.maxWidth="600px"):"–°–ª–æ–∂–Ω—ã–π"===h?(L=25,f=25,ae(),e.style.maxWidth="770px",t.style.maxWidth="750px"):"–õ–µ–≥–∫–∏–π"===h&&(L=10,f=10,ae(),e.style.maxWidth="420px",t.style.maxWidth="400px")})())})),document.querySelector(".new-game").addEventListener("click",ae),te.addEventListener("click",(e=>{const t=e.target;t.classList.contains("btn_sound-on")?(t.classList.remove("btn_sound-on"),t.classList.add("btn_sound-off"),t.title="–í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫"):(t.classList.add("btn_sound-on"),t.classList.remove("btn_sound-off"),t.title="–í—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫")}));const le=document.querySelector(".btn_theme"),se=()=>{const e=document.querySelectorAll(".cell");"–°–µ—Ç–ª–∞—è —Ç–µ–º–∞"===C?e.forEach((e=>{e.classList.contains("disabled")?e.classList.add("disabled_dark"):e.classList.add("cell_dark")})):e.forEach((e=>{e.classList.remove("cell_dark"),e.classList.remove("disabled_dark")}))};le.addEventListener("click",(e=>{const t=document.querySelector(".game"),o=e.target;"–¢–µ–º–Ω–∞—è —Ç–µ–º–∞"===o.innerHTML?(o.innerHTML="–°–µ—Ç–ª–∞—è —Ç–µ–º–∞",C="–°–µ—Ç–ª–∞—è —Ç–µ–º–∞",t.classList.add("game_dark-theme")):(o.innerHTML="–¢–µ–º–Ω–∞—è —Ç–µ–º–∞",C="–¢–µ–º–Ω–∞—è —Ç–µ–º–∞",t.classList.remove("game_dark-theme")),se()}));const ce=document.querySelector(".continue"),re=()=>{$(),D.addEventListener("click",oe),ce.removeEventListener("click",re)};"go"===k&&(()=>{const e=document.querySelector(".game");document.querySelector(".btn_theme").innerHTML=C,X.innerHTML=q,Z.innerHTML=T,ne.innerHTML=S,Y.value=I,document.querySelector(".time").textContent=u,e.className=y,ce.addEventListener("click",re);const t=document.querySelector(".game__field");p&&(e.style.maxWidth=p),_&&(t.style.maxWidth=_);const o=document.querySelectorAll(".cell");for(let e=0;e<o.length;e++)o[e].className=w[e],o[e].innerHTML=N[e],o[e].style.color=O[e];se(),document.querySelectorAll(".nav__item").forEach((e=>{e.classList.remove("nav__item_active"),e.innerHTML===h&&e.classList.add("nav__item_active")})),t.removeEventListener("click",oe)})()})();